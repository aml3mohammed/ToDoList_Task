# ToDoList_Task
## Task:
Making  to do-list application using the GunDB to handle storing data.


## Intoduction to GunDB:
GUN is a small, easy, and fast data sync and storage system that runs everywhere JavaScript does. The aim of GUN is to let you focus on the data that needs to be stored, loaded, and shared in your app without worrying about servers, network calls, databases, or tracking offline changes or concurrency conflicts.


## Steps:
### - First let's create the html:
```
<html>
    <head>
        <title>To Do List</title>
        <link rel="stylesheet" href="ToDoList.css" type="text/css">
    </head>
    <body>
        <h1>To do list</h1>

        <form id="add">
            <input id="title" placeholder="Enter your task title"><br/>
            <input id="duration" placeholder="Duration,ex:3days"><br/>
            <input id="start" placeholder="Start date,ex:DD/MM/YYYY">
            <input type="submit" value="Submit" id="submit" ><br/>            
            <input id="end" placeholder="End date,ex:DD/MM/YYYY">
        </form>

        <table id="headers" border="1" cellspacing="0" cellpadding="5">            
            <tr>               
                <td class="header">Task</td>
                <td class="header">Duration</td>
                <td class="header">Starts</td>
                <td class="header">End</td>            
            </tr>   
        </table>

        <table id="saved" border="1" cellspacing="0" cellpadding="5"></table>
```
Here, the table of id `saved` will be used by the JavaScript code that we will soon create and the `<form>` will be used to add new tasks.
```
<script src="https://cdn.jsdelivr.net/npm/gun/gun.js"></script>
        <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
        <script type="text/javascript" src="ToDoList.js"></script>
    </body>
</html>
```
Then, we need to include GUN, jQuery, and our javascript code right above the closing `</body>` tag!

### - Now, after we are done our application appearance let's create the js code:
```
var gun = Gun() ;
var tasks = gun.get('tasks') ;

$('form').on('submit' , function(event){
    var t = $('form').find('#title') ;
    var d = $('form').find('#duration') ;
    var s = $('form').find('#start') ;
    var e = $('form').find('#end') ;

    tasks.set({
        title : t.val() ,
        duration : d.val() ,
        start : s.val() ,
        end : e.val() ,
    });
    t.val('') ;
    d.val('') ;
    s.val('') ;
    e.val('') ;
    event.preventDefault() ;
});
```
We first load GUN itself, then we initialize GUN and tell it we will place all data under the key `tasks`.

Finally, we handle what happens when the user submits his data as we tell GUN to store our object.
In GUN we use `set()` to store values in a list.
So this object is added by GUN to the list of tasks.
```
tasks.map().on(function(task , id){
    var tr = $('#' + id).get(0) || $('<tr>').attr('id', id).appendTo('#saved') ;

    if(task){
        var html = `<td class="saved">${task.title}</td><td class="saved">${task.duration}</td><td class="saved">${task.start}</td><td class="saved">${task.end}</td>` ;        
        html += '<td class="options"><input type="checkbox" onclick="clickCheck(this)" ' + (task.done ? 'checked' : '') + '></td>' ;     
        html += '<td class="options"><img onclick="clickDelete(this)" src="https://cdnjs.cloudflare.com/ajax/libs/foundicons/3.0.0/svgs/fi-x.svg"/></td>' ;       
        tr.html(html) ;    
    }
    else{
        tr.remove() ;
    }
});

function clickCheck (element) {
    tasks.get($(element).parent().parent().attr('id')).put({done: $(element).prop('checked')}) ;
};

function clickDelete (element) {
    tasks.get($(element).parent().parent().attr('id')).put(null) ;
};

```
By doing `tasks.map().on(function (task, id)` we tell GUN we want to listen to any and all changes at the task list. GUN will call this function for each task that is already in the list. And it will also call this function whenever a task is added by `set()`.
So in the code here we add a `<tr>` element for each task, with the `id` attribute of the element set to the `id` of the task that is provided and was automatically generated by GUN.
Then each time a 'new' task is received we can check if we already have a `<tr>` element with the same `id`. If we do not, we can insert a new one. And next we set the content `html` of the element to the tasks's title, duration, start, and end each in separated `<td>` element.

We add a `<input type="checkbox">` in front of the task and give it the done state of the task item we got from GUN.
When the user clicks the checkbox, again we get the task item from GUN via it's `id` and tell GUN to store the new task state. If the task property wasn't yet stored in the task item, it will be added. If it already existed, it will be overwritten.

In a distributed graph database, like GUN, data can not literally be deleted. Hence GUN does not provide a delete function. What you need to do is overwrite the old value with null.
So here with `taskss.get($(element).parent().parent().attr('id')).put(null)`, whenever the user clicks the image we overwrite the old task item with null.


## Resources:
- https://gun.eco/
- https://www.npmjs.com/package/gun
- https://github.com/amark/gun/wiki/API#map
